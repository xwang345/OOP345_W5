# OOP345_W5
OOP345_W5

Containers

Workshop 5


In this workshop, you code a container class that holds notifications and a class that holds separate messages.

Learning Outcomes

Upon successful completion of this workshop, you will have demonstrated the abilities to

    design and code a composition of objects
    read records from a file into a string object
    parse a string object into components based on simple rules
    reflect on the material learned in this workshop


Specifications

Overview

This workshop retrieves messages from a data file and collects them in a notification.  Each record in the data file contains a single message and ends with the same delimiting character. 

The test data file contains:
```dat
 jim Workshop 5 is cool
 harry @jim working on workshop 5 now 
 chris
 dave what the ^#$%!
 john @harry I'm done

```
The first message consists of a user name followed by a tweet.  The second message consists of a user name, a reply name prefaced by an @, and followed by a tweet.  Your solution ignores incomplete messages, such as the third message here.

Solution

Your complete solution to this workshop consists of three modules:

    w5 - the application that collects and displays notifications
    Notifications - the module that holds and manages messages
    Message - the module that manages the retrieval and display of a single message

The classes for this workshop are defined in the w5 namespace. 

Application

The source file that uses your two classes is:
```c++
 // Workshop 5 - Containers
 // w5.cpp

 #include <iostream>
 #include <fstream>
 #include "Message.h"
 #include "Notifications.h"

 const char REC_DELIMITER = '\n';

 w5::Notifications collect(std::ifstream& in, char recDelim) {
     w5::Notifications notifications;

     do {
         w5::Message message(in, recDelim);
         if (!message.empty())
             notifications += std::move(message);
     } while(in);

     return notifications;
 }

 int main(int argc, char* argv[]) {
     if (argc == 1) {
         std::cerr << argv[0] << ": missing file operand\n";
         return 1;
     }
     else if (argc != 2) {
         std::cerr << argv[0] << ": too many arguments\n";
         return 2;
     }
     std::ifstream file(argv[1]);
     if (!file) {
         std::cerr << argv[0] << "\n: Failed to open " << argv[1] << "\n"; 
         return 3;
     }

     std::cout << "\nNotifications\n=============\n\n";
     w5::Notifications notifications = collect(file, REC_DELIMITER);

     notifications.display(std::cout);

     std::cout << "Press any key to continue ... ";
     std::cin.get();
 }
```

Notifications Module

A Notifications object manages access to a set of up to 10 Message objects.  The Notifications object collects copies of the Message objects, owns those copies and destroys them once they are no longer needed. 

Your design of the Notifications class includes the following member functions:
```c++

    Notifications() - default constructor - empty
    Notifications(const Notifications&) - copy constructor
    Notifications& operator=(const Notifications&) - copy assignment operator
    Notifications(Notifications&&) - move constructor
    Notifications&& operator=(Notifications&&) - move assignment operator
    ~Notifications() - destructor
    void operator+=(const Message& msg) - adds msg to the set
    void display(std::ostream& os) const - inserts the Message objects to the os output stream
    
```

Store the code for your Notifications module in two source files:

    Notifications.h - defines the Notifications class
    Notifications.cpp - implements the member functions for the Notifications class

Message Module

A Message object holds nothing or a single message that has been successfully retrieved from an std::ifstream file object.  An object that holds nothing is in a safe empty state. 

Your design of the Message class includes the following member functions:

    Message(std::ifstream& in, char c) - constructor retrieves a record from the in file object, parses the record (as described above) and stores its components in the Message object.  c is the character that delimits each record
    bool empty() const - returns true if the object is in a safe empty state
    void display(std::ostream&) const - displays the Message objects within the container

Store the code for your Message module in two source files:

    Message.h - defines the Message class
    Message.cpp - implements the member functions for the class.

Results

The results generated by the application using your solution and the test data file are listed below:

```
 Notifications
 =============

 Message
  User  : jim
  Tweet : Workshop 5 is cool

 Message
  User  : harry
  Reply : jim
  Tweet : working on workshop 5 now

 Message
  User  : dave
  Tweet : what the ^#$%!

 Message
  User  : john
  Reply : harry
  Tweet : I'm done

 Press any key to continue ...

```

Submission

Typescript

On matrix, create a typescript of your complete solution using the following commands:

```
 + At the prompt, type: script w5.txt
 + At the prompt, type: whoami
 + At the prompt, type: cat w5.cpp Notifications.* Message.*
 + At the prompt, type: g++ -o w5 -std=c++0x w5.cpp Notifications.cpp Message.cpp 
 + At the prompt, type: w5 w5_test.dat
 + At the prompt, type: exit
 ```

These commands will produce a file named w5.txt.

Download your typescript file to your local computer.  Submit your solution according to your professor's instructions.

Possible Submission Instructions (confirm with your instructor)

Moodle

    Login to OOP244
    Select OOP345 if necessary
    Select W5 under Workshops
    Upload your typescript file to Moodle
    Press "Edit"
    Summarize to your instructor the concepts that you have learned in doing this particular workshop.  Add any other comments you wish to make.
    Press "Save Changes"
    When ready to submit, press "Send for Marking"

MySeneca

    Login to IPC144
    Select OOP345 if necessary
    Select Assignments or Workshops
    Select W5
    Press "Browse My Computer" to upload your typescript
    Press "Edit"
    Summarize to your instructor the concepts that you have learned in doing this particular workshop.  Add any other comments you wish to make in the comment box provided.
    Press "Submit" IMPORTANT: If you "Save As Draft" your instructor does not receive your submission unitl you press "Submit"
